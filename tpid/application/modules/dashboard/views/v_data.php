<div class="content">
            <div class="intro-y flex flex-col sm:flex-row items-center mt-8">
                <h2 class="text-lg font-medium mr-auto">
                    Semua Data
                </h2>
            </div>
            <div class="intro-y grid grid-cols-12 gap-6 mt-5">
                <!-- BEGIN: Blog Layout -->
                <div class="intro-y blog col-span-12 md:col-span-6 box">
                    <a href="javascript:;" data-toggle="modal" data-target="#tableau_dispenduk">
                    <div class="blog__preview image-fit">
                        <img alt="" class="rounded-t-md" src="https://connect.banyuwangikab.go.id/update/assets/images/dashboard/dispenduk.png">
                        <div class="absolute bottom-0 text-white px-5 pb-6 z-10"> 
                            <p class="block font-medium text-xl mt-3 blog__category px-2 py-1 rounded">Dashboard Data Kependudukan</p> </div>
                    </div>
                    <div class="px-5 pt-3 pb-5 border-t border-gray-200">
                        <div class="w-full flex text-gray-600 text-xs sm:text-sm">
                            <div class="ml-auto"> Sumber Data: <span class="font-medium">Dinas Kependudukan Dan Pencatatan Sipil</span> </div>
                        </div>
                    </div>
                    <div class="p-5"></div>
                    </a>
                </div>
                <div class="intro-y blog col-span-12 md:col-span-6 box">
                    <a href="javascript:;" data-toggle="modal" data-target="#tableau_pertanian">
                    <div class="blog__preview image-fit">
                        <img alt="Midone Tailwind HTML Admin Template" class="rounded-t-md" src="https://connect.banyuwangikab.go.id/update/assets/images/dashboard/pertanian.png">
                        <div class="absolute bottom-0 text-white px-5 pb-6 z-10"> 
                            <p class="block font-medium text-xl mt-3 blog__category px-2 py-1 rounded">Dashboard Data Pertanian</p> </div>
                    </div>
                    <div class="px-5 pt-3 pb-5 border-t border-gray-200">
                        <div class="w-full flex text-gray-600 text-xs sm:text-sm">
                            <div class="ml-auto"> Sumber Data: <span class="font-medium">Dinas Pertanian</span> </div>
                        </div>
                    </div>
                    <div class="p-5"></div>
                    </a>
                </div>
                <!-- END: Blog Layout -->
            </div>             
</div>

<div class="modal" id="tableau_dispenduk">
   <div class="modal__content modal__content--xl" style="width: 1350px!important">
      <div class="p-5 grid grid-cols-12 gap-1 row-gap-1">
         <div class="col-span-12 sm:col-span-12 lg:col-span-12 col-xs-12">
            <div class="intro-y">
               <!-- <h2 class="text-lg font-medium truncate mr-5">
                  Pendidikan Terakhir
                  </h2> -->
            </div>
            <div class='tableauPlaceholder' id='viz1615741446134' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Da&#47;DashboardDataAdminduk&#47;Dashboard1&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='DashboardDataAdminduk&#47;Dashboard1' /><param name='tabs' value='no' /><param name='toolbar' value='no' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Da&#47;DashboardDataAdminduk&#47;Dashboard1&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1615741446134');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1200px';vizElement.style.height='800px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1200px';vizElement.style.height='800px';} else { vizElement.style.width='100%';vizElement.style.height='1850px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
         </div>
      </div>
   </div>
</div>
<div class="modal" id="tableau_pertanian">
   <div class="modal__content modal__content--xl" style="width: 1350px!important">
      <div class="p-5 grid grid-cols-12 gap-1 row-gap-1">
         <div class="col-span-12 sm:col-span-12 lg:col-span-12 col-xs-12">
            <div class='tableauPlaceholder' id='viz1615741378025' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Da&#47;DashboardDataPertanian&#47;Dashboard2&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='DashboardDataPertanian&#47;Dashboard2' /><param name='tabs' value='no' /><param name='toolbar' value='no' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Da&#47;DashboardDataPertanian&#47;Dashboard2&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1615741378025');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1000px';vizElement.style.height='800px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1000px';vizElement.style.height='800px';} else { vizElement.style.width='100%';vizElement.style.height='1200px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
         </div>
      </div>
   </div>
</div>

<?php $this->load->view('js');?>
<script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
<script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.candy.js"></script>
<script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.fusion.js"></script>

<script>
    $(document).ready(function() {
        var url = '<?=site_url();?>'
        $.ajax({
                    url : "perizinan_nakes/json_index",
                    type: "GET",
                    dataType: "JSON",
                    beforeSend:()=>{
                    },
                    success:(data)=>
                    {
                    $('#drop').removeClass('loader');
                    $("#info").html("")
                    const dataSource = {
                        chart: {
                            height: "100px",
                            baseFontSize: "13",
                            // baseFontColor: "#1C3FAA",
                            caption: "Perizinan Tenaga Kesehatan Berdasarkan Kecamatan",
                            subcaption: "Sumber : Sistem Perizinan Online",
                            yaxisname: "Total",
                            aligncaptionwithcanvas: "0",
                            plottooltext: "<b>$dataValue</b> Perizinan",
                            theme: "fusion"
                        },
                        data: data.by_kec
                        };

                    FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: "bar2d",
                            color: "#269ffb",
                            renderAt: "chart-nakes-by-kec",
                            width: "100%", //width of the chart
                            height: "550", //height of the chart
                            dataFormat: "json",
                            dataSource
                        }).render();
                    });

                    const dataSources = {
                        chart: {
                            height: "100px",
                            baseFontSize: "13",
                            // baseFontColor: "#1C3FAA",
                            caption: "Sumber : Sistem Perizinan Online",
                            yaxisname: "Total",
                            aligncaptionwithcanvas: "0",
                            plottooltext: "<b>$dataValue</b> Perizinan",
                            theme: "fusion"
                        },
                        data: data.by_jenis_surat
                        };

                        FusionCharts.ready(function() {
                            var myChart = new FusionCharts({
                                type: "bar2d",
                                color: "#269ffb",
                                renderAt: "chart-nakes-by-surat",
                                width: "100%",
                                height: "550",
                                dataFormat: "json",
                                dataSource:dataSources
                        }).render();
                    });

                    const dataSourcex = {
                        chart: {
                            caption: "Perizinan Ketenagakerjaan Berdasarkan Status Berlaku",
                            subcaption: "Sumber Data : Perizinan Online",
                            showpercentvalues: "1",
                            defaultcenterlabel: "Android Distribution",
                            aligncaptionwithcanvas: "0",
                            captionpadding: "0",
                            decimals: "1",
                            enableMultiSlicing: "0",
                            animateClockwise: "1",
                            "smartLineColor": "#ff0000",
                            "smartLineThickness": "2",
                            "smartLineAlpha": "100",
                            "isSmartLineSlanted": "0",
                            plottooltext: "<b>$percentValue</b> Pendaftar <b>$label</b>",
                            centerlabel: "# Users: $value",
                            theme: "fusion",
                            palettecolors: 'ec407a, 42a5f5'
                        },
                        data: data.by_status_berlaku
                    };

                    FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: "pie2d",
                            renderAt: "chart-nakes-by-berlaku",
                            width: "100%", //width of the chart
                            height: "400", //height of the chart
                            dataFormat: "json",
                            dataSource: dataSourcex
                        }).render();
                    });

                    },
                    error:(xhr, status, error)=>{
                        $("#info").html(errorMessage)
                }
        });

        $.ajax({
                url : "ketenagakerjaan/json_index",
                type: "GET",
                dataType: "JSON",
                beforeSend:()=>{
                    $("#info").html(`<span style='font-size:2rem; color:##0335fc;'><strong>Sedang memperbaharui data..</strong></span>`)
                },
                success:(data)=>
                {
                   const dataSource = {
                        chart: {
                            height: "100px",
                            baseFontSize: "13",
                            // baseFontColor: "#1C3FAA",
                            caption: "Perizinan Tenaga Kerja Berdasarkan Kecamatan",
                            subcaption: "Sumber : Sistem Perizinan Online",
                            yaxisname: "Total",
                            aligncaptionwithcanvas: "0",
                            plottooltext: "<b>$dataValue</b> Perizinan",
                            theme: "fusion"
                        },
                        data: data.pendaftar_by_kecamatan
                        };

                   FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: "bar2d",
                            color: "#269ffb",
                            renderAt: "chart-naker-by-kec",
                            width: "100%", //width of the chart
                            height: "550", //height of the chart
                            dataFormat: "json",
                            dataSource
                        }).render();
                   });

                   const dataSources = {
                        chart: {
                            caption: "Perizinan Tenaga Kerja Berdasarkan Jenjang Pendidikan",
                            "logoURL": "https://slide.banyuwangikab.go.id/media/efd85-logo.png",
                            "logoAlpha": "40",
                            "logoScale": "30",
                            "logoPosition": "TR",
                            subcaption: "Juni 2020",
                            xAxisPosition: "right",
                            xaxisname: "Jenjang Pendidikan",
                            yaxisname: "Jumlah",
                            numbersuffix: " Orang",
                            theme: "candy",
                            palettecolors: '42a5f5'
                        },
                        data: data.jenjang_pendidikan
                   };

                   FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: "column2d",
                            renderAt: "chart-naker-by-pendidikan",
                            width: "100%", //width of the chart
                            height: "400", //height of the chart
                            dataFormat: "json",
                            dataSource : dataSources
                        }).render();
                   });

                   const dataSourcesx = {
                        chart: {
                            caption: "Perizinan Tenaga Kerja Berdasarkan Gender",
                            // subcaption: "Juni 2020",
                            showpercentvalues: "1",
                            defaultcenterlabel: "Android Distribution",
                            aligncaptionwithcanvas: "0",
                            captionpadding: "0",
                            decimals: "1",
                            enableMultiSlicing: "0",
                            animateClockwise: "1",
                            "smartLineColor": "#ff0000",
                            "smartLineThickness": "2",
                            "smartLineAlpha": "100",
                            "isSmartLineSlanted": "0",
                            plottooltext: "<b>$percentValue</b> Pendaftar <b>$label</b>",
                            centerlabel: "# Users: $value",
                            theme: "fusion",
                            palettecolors: 'ec407a, 42a5f5'
                        },
                        data: data.gender
                   };

                   FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: "pie2d",
                            renderAt: "chart-naker-by-gender",
                            width: "100%", //width of the chart
                            height: "400", //height of the chart
                            dataFormat: "json",
                            dataSource: dataSourcesx
                        }).render();
                   });

                   const dataSourcesk = {
                        chart: {
                            caption: "Perizinan Tenaga Kerja Berdasarkan Status Perkawinan",
                            // subcaption: "Juni 2020",
                            showpercentvalues: "1",
                            defaultcenterlabel: "Android Distribution",
                            aligncaptionwithcanvas: "0",
                            captionpadding: "0",
                            decimals: "1",
                            enableMultiSlicing: "0",
                            animateClockwise: "1",
                            "smartLineColor": "#ff0000",
                            "smartLineThickness": "2",
                            "smartLineAlpha": "100",
                            "isSmartLineSlanted": "0",
                            plottooltext: "<b>$percentValue</b> Pendaftar <b>$label</b>",
                            centerlabel: "# Users: $value",
                            theme: "fusion",
                            palettecolors: 'ec407a, 42a5f5'
                        },
                        data: data.total_by_status_kawin
                   };

                   FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: "pie2d",
                            renderAt: "chart-naker-by-nikah",
                            width: "100%", //width of the chart
                            height: "400", //height of the chart
                            dataFormat: "json",
                            dataSource: dataSourcesk
                        }).render();
                   });

                },
                    error:(xhr, status, error)=>{

                        $("#info").html(errorMessage)
                    }
        });
        var kecamatan = null;
        $.ajax({
                    url: "ketenagakerjaan/modal_naker/" + kecamatan,
                    type: "GET",
                    dataType: "JSON",
                    beforeSend: () => {
                        $("#info").html(`<span style='font-size:2rem; color:##0335fc;'><strong>Sedang memperbaharui data..</strong></span>`)
                    },
                    success: (data) => {
                        $("#info").html("")
                        $("#modal_title").html('Grafik Pendaftar kartu kuning di kecamatan ' +kecamatan)
                        // console.log(data.by_pendidikan)
                        const dataSource = {
                        chart: {
                            caption: "Berdasarkan Jenjang Pendidikan",
                            "logoURL": "https://slide.banyuwangikab.go.id/media/efd85-logo.png",
                            "logoAlpha": "40",
                            "logoScale": "30",
                            "logoPosition": "TR",
                            subcaption: "Juni 2020",
                            xAxisPosition: "right",
                            xaxisname: "Jenjang Pendidikan",
                            yaxisname: "Jumlah",
                            numbersuffix: " Orang",
                            theme: "candy",
                            palettecolors: '42a5f5'
                        },
                        data: data.by_pendidikan
                    };

                    FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: "column2d",
                            renderAt: "chart-container",
                            width: "560", //width of the chart
                            height: "400", //height of the chart
                            dataFormat: "json",
                            dataSource
                        }).render();
                    });

                    var newdata = {
                        chart: {
                            caption: "Berdasarkan Status Pernikahan",
                            subcaption: "Juni 2020",
                            showpercentvalues: "1",
                            defaultcenterlabel: "Android Distribution",
                            aligncaptionwithcanvas: "0",
                            captionpadding: "0",
                            decimals: "1",
                            enableMultiSlicing: "0",
                            animateClockwise: "1",
                            plottooltext: "<b>$percentValue</b> Pendaftar <b>$label</b>",
                            centerlabel: "# Users: $value",
                            theme: "candy",
                            palettecolors: 'ec407a, 42a5f5'
                        },
                        data: data.by_pernikahan
                    };

                    FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: "pie2d",
                            renderAt: "chart-container2",
                            width: "410", //width of the chart
                            height: "400", //height of the chart
                            dataFormat: "json",
                            dataSource: newdata
                        }).render();
                    });

                    const primary = '#6993FF';
                    const success = '#1BC5BD';
                    const info = '#8950FC';
                    const warning = '#FFA800';
                    const danger = '#F64E60';
                    const dataSources = {
                        chart: {
                            caption: "Berdasarkan Gender",
                            subcaption: "Juni 2020",
                            showpercentvalues: "1",
                            defaultcenterlabel: "Android Distribution",
                            aligncaptionwithcanvas: "0",
                            captionpadding: "0",
                            decimals: "1",
                            enableMultiSlicing: "0",
                            animateClockwise: "1",
                            "smartLineColor": "#ff0000",
                            "smartLineThickness": "2",
                            "smartLineAlpha": "100",
                            "isSmartLineSlanted": "0",
                            plottooltext: "<b>$percentValue</b> Pendaftar <b>$label</b>",
                            centerlabel: "# Users: $value",
                            theme: "candy",
                            palettecolors: 'ec407a, 42a5f5'
                        },
                        data: data.by_gender
                    };

                    FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: "pie2d",
                            renderAt: "chart-container1",
                            width: "330", //width of the chart
                            height: "400", //height of the chart
                            dataFormat: "json",
                            dataSource: dataSources
                        }).render();
                    });
                    },
                    error: (xhr, status, error) => {

                        $("#info").html(errorMessage)
                    }
        });

        const umur = {
          chart: {
            caption: "Jumlah Penduduk Berdasarkan Umur",
            plottooltext: "<b>$percentValue</b> of web servers run on $label servers",
            showlegend: "1",
            showpercentvalues: "1",
            legendposition: "bottom",
            usedataplotcolorforlabels: "1",
            theme: "fusion"
          },
          data: [
            {
              label: "Umur 0-4 Tahun",
              value: "70735"
            },
            {
              label: "Umur 5-9 Tahun",
              value: "122817"
            },
            {
              label: "Umur 10-14 Tahun",
              value: "132122"
            },
            {
              label: "Umur 15-19 Tahun",
              value: "122624"
            },
            {
              label: "Umur 20-24 Tahun",
              value: "125281"
            },
            {
              label: "Umur 25-29 Tahun",
              value: "122247"
            },
            {
              label: "Umur 30-34 Tahun",
              value: "116200"
            },
            {
              label: "Umur 35-39 Tahun",
              value: "129509"
            },
            {
              label: "Umur 40-44 Tahun",
              value: "134450"
            },
            {
              label: "Umur 45-49 Tahun",
              value: "137933"
            },
            {
              label: "Umur 50-54 Tahun",
              value: "126861"
            },
            {
              label: "Umur 55-59 Tahun",
              value: "112978"
            },
            {
              label: "Umur 60-64 Tahun",
              value: "291918"
            },
            {
              label: "Umur 65-69 Tahun",
              value: "67177"
            },
            {
              label: "Umur 70-74 Tahun",
              value: "52875"
            }
          ]
        };

        FusionCharts.ready(function() {
          var myChart = new FusionCharts({
            type: "pie2d",
            renderAt: "chart-penduduk-by-umur",
            width: "100%",
            height: "100%",
            dataFormat: "json",
            dataSource : umur
          }).render();
        });
    })
    
    function load_modal(param){
        $('#load_modal').modal('show');
        $.ajax({
                url : "dashboard/load_data/"+param,
                type: "GET",
                dataType: "JSON",
                beforeSend:()=>{
                },
                success:(data)=>
                {
                   const dataSource = {
                        chart: {
                            height: "100px",
                            baseFontSize: "13",
                            // baseFontColor: "#1C3FAA",
                            caption: data.caption,
                            subcaption: "Sumber : "+data.subcaption,
                            yaxisname: "Total",
                            aligncaptionwithcanvas: "0",
                            plottooltext: "<b>$dataValue</b> Perizinan",
                            theme: "fusion"
                        },
                        data: data.tabel
                        };

                   FusionCharts.ready(function() {
                        var myChart = new FusionCharts({
                            type: data.chart,
                            color: data.color,
                            renderAt: "load_chart",
                            width: "100%", //width of the chart
                            height: "550", //height of the chart
                            dataFormat: "json",
                            dataSource
                        }).render();
                   });
                },
                    error:(xhr, status, error)=>{
                        $("#info").html(errorMessage)
                }
        });
    }

</script>